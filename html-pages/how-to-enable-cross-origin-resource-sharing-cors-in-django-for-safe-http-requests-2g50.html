<h2>Situation</h2>
<p>Imagine you are learning web development with Python and just started a Django project for your web project. Everything looks clean and perfect, you have the database running, the models are designed and REST APIs are ready to be requested.</p>
<p>Now you come to your front-end site and started to send the request to your back-end and suddenly your request is blocked. The error message displayed: “Access to fetch at ‘<a href="http://127.0.0.1:8000/users%E2%80%99">http://127.0.0.1:8000/users’</a> from origin ‘<a href="http://127.0.0.1:5000%E2%80%99">http://127.0.0.1:5000’</a> has been blocked by CORS policy”.</p>
<p>What just happen? You’re now checking your code again to make sure you don’t make any mistakes but even if your code looks perfectly fine, the error is still there.</p>
<p>Don’t worry, you are just missing, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">Cross-Origin Resource Sharing(CORS)</a> configuration in your Django project. In this article, we will discover what is CORS and how to turn it on to allow your JavaScript code to send HTTP requests.</p>
<h2>What is CORS?</h2>
<p>By default, a web page can only access the resource of the same domain, any request to other domain resources if not allowed by that resource will be blocked automatically by web browser. This feature makes the web more secure and prevents cross-site scripting (XSS) attacks.
CORS is a mechanism that allows web application requests to API from other domains which strongly supports by modern browsers and can be easily implemented in Django using <code>django-cors-headers</code> library.</p>
<h2>Enable CORS in Django</h2>
<p>First, you need to install <code>django-cors-headers</code> using pip command:</p>
<pre><code>pip install django-cors-headers
</code></pre>
<p>After the package is successfully installed, open your <code>setting.py</code> file in your Django project to config CORS. In the setting file, you need to add <code>corsheaders</code> in the list of <code>INSTALLED_APPS</code></p>
<pre><code>INSTALLED_APPS = [
    ...
    &#39;corsheaders&#39;,
    ...
]
</code></pre>
<p>You will also need to add a middleware class to listen in on responses and make sure the middleware is added before any other middleware that inspects the response. If it is not before, it will not be able to add the CORS headers to these responses:</p>
<pre><code>MIDDLEWARE = [
    ...
    &#39;corsheaders.middleware.CorsMiddleware&#39;,
    ...
]
</code></pre>
<p>Finally, config the middleware <code>CORS_ALLOWED_ORIGINS</code> inside <code>setting.py</code> file to allow a list of domains that allow sending a request to your backend API. For example, if your front-end server is on <em><a href="http://localhost:5000">http://localhost:5000</a></em> and you want to send a request from that, just add:</p>
<pre><code> CORS_ALLOWED_ORIGINS = [
    &quot;http://127.0.0.1:5000&quot;,
]
</code></pre>
<p>Come back to your front-end again and check the result, your request is now safe to call and get the response perfectly.</p>
<p><code>django-cors-headers</code> has other configurations for you to freely set up like allowing CORS based on regex or which kind of HTTP method is allowed in CORS…. See other configurations of <code>django-cors-headers</code> <a href="https://pypi.org/project/django-cors-headers/">here</a>.</p>
<hr>
<p>Thank you for reading, if you find it helpful please like and share this article to spread the knowledge to everyone.
Read more articles about technology, productivity and minimalism on my website at
{% embed <a href="https://junedang.com/">https://junedang.com/</a> %}</p>
