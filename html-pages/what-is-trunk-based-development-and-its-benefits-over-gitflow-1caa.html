<p>If you have worked with <a href="https://dev.to/junedang/getting-started-with-version-control-part-1-what-is-version-control-g28">Git</a> and encountered a situation like this: A big, long-lived featured branch was created last week ago about to merge and you have to review all the changed code for the whole week. This is the moment you realize that one developer cannot review those codes without missing small bugs, grammar issues, and missed test cases.</p>
<p>Things can get even worse when your team has implemented continuous integration and delivery (CI/CD), where changes are automatically deployed to production right after the feature branch merges with the deployment branch. With a large number of changes merged directly into the main branch, your product may experience significant changes in functionality, behavior, and user interface, making it easier for big issues to occur.</p>
<p>Then the big issue happened and your team wished to know what the f*ck just going on. Reverting the code may not be a good solution, as that means losing the effort put into the week’s work.</p>
<p>“There must be a better solution for this” – you asked yourself. Luckily, me and you, we are not alone since many big tech companies faced the same issue. A new approach implemented by Facebook, Google and other big tech enterprises is adopting Trunk-based development process. In today’s article let’s find out what is it and how it will help you better manage codebase of big projects.</p>
<h2>GitFlow (or Feature Branched)</h2>
<p>Let’s first talk about the approach we discuss earlier, the GitFlow development process.</p>
<p>This development process was introduced in 2010 by <a href="https://nvie.com/about/">Vincent Driessen</a>. The idea behind this is to have a developer or group of developers create a separate branch from the Trunk branch (usually _main _branch) and work isolation on that feature branch until they see everything is completed and that feature branch is ready to merge to the trunk branch.</p>
<p>Usually, this approach means that all small changes on the feature such as development, tests, and bug fix are all done in that separate branch which will create a long-lived branch that could take a week or more to be ready to merge.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/9dl7punwxp7hm6q0cru3.png" alt="Feature branch development"></p>
<h2>Challenges of GitFlow development</h2>
<p>From the image above, you can easily recognize the problems of GitFlow development: Because the process of developing a completed feature took too long that it is hard for developers to take quick feedback on changes, and also because the changes were too much that it is usually hard to review the code and I even not mention on the big monster here called <em>merge conflict</em>.</p>
<h2>Trunk-based development – A better approach</h2>
<p>There is a better approach that solves above problems of GitGFlow although applying this will take some time and the learning curve that I will mention in a later section.</p>
<p>A trunk-based development (TBD) is a branching solution in that changes are directly moving onto the Trunk branch every day and the shared Trunk branch is always in the release status. Typically, developers that integrate TBD should regularly merge their changes to the trunk branch after they do small changes no matter if it is related to a new feature or bug fix. And in contrast with the long-lived feature branch development above, TBD branches should only last for hours to a day.</p>
<p>The image below will be best described for a typical trunk-based development workflow:</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/0tc96zljqxzy3fh2821y.png" alt="Trunk-based development"></p>
<p>Here are some benefits of trunk-based development over GitFlow:</p>
<ul>
<li><p><strong>Improve code review section</strong>: Because changes are now smaller and easier to read and review, your code will likely be reviewed quicker and also can avoid bugs that are hard to detect due to lengthy merge request of GitFlow.</p>
</li>
<li><p><strong>Continual feedback loop</strong>: Since changes are frequently merged and moved to the deployment state, your development team will benefit from receiving feedback on changes earlier.</p>
</li>
<li><p><strong>Designed for CI/CD</strong>: TBD is designed dedicatedly for continuous integration and continuous development policy where changes must be reviewed and deliver every day.</p>
</li>
<li><p><strong>Feature flags</strong>: As your changes will be delivered continuously, there is likely that sometimes you don’t want your changes to have in the deployed state. You can achieve this by implementing feature flag where you store configurations of your feature as flag. Thus, this will reduce the risk of having an unfished feature delivered to production and so gives more control over your feature changes and the codebase.</p>
</li>
</ul>
<h2>How to implement trunk-based development</h2>
<p>TBD is not a silver bullet point where your team can easily implement it within a few days. To be able to work well with this working process your team need to follow these practices:</p>
<ol>
<li>Have no more than three active branches in the application’s repository.</li>
<li>Changes in branches should be merged regularly and branches should not live for longer than one day.</li>
<li>Your application should implement CI/CD that changes should automatically build and deploy.</li>
<li>Having feature flag configurations to reduce the risk of having unfinished features released.</li>
<li>Having a code review section before any change is merged to the trunk branch.</li>
</ol>
<h2>Conclusion</h2>
<p>With the rapid growth of CI/CD working process, more and more developer teams are looking for a solution that can help them speed up the development process. By reducing the headache of dealing with long-lived feature branches and forcing the changes to deliver regularly, TBD can solve the problem of going fast on new feature changes while keeping the classic branching working strategy that developers work separately and still help developers control their changes between codebase and the delivery features.</p>
<hr>
<p>The original article was published on MARCH 30, 2023 at <a href="https://junedang.com/what-is-trunk-based-development-and-its-benefits-over-gitflow/">junedang.com</a></p>
